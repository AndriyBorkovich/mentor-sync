name: Validate YAML

on:
    push:
        paths:
            - ".github/**/*.yml"
            - ".github/**/*.yaml"
            - ".yamllint"
    pull_request:
        paths:
            - ".github/**/*.yml"
            - ".github/**/*.yaml"
            - ".yamllint"

jobs:
    yamllint:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Run yamllint on workflow files
              uses: ibiqlik/action-yamllint@v3
              with:
                  file_or_dir: .github/workflows
                  config_file: .yamllint

    summary:
        runs-on: ubuntu-latest
        needs: yamllint
        if: always()
        steps:
            - name: Output lint result
              run: |
                  if [ "${{ needs.yamllint.result }}" = "success" ]; then
                      echo "All workflow YAML files passed linting.";
                  else
                      echo "YAML linting failed. See logs in yamllint job.";
                      exit 1;
                  fi
